% Section 2 - C++ bootstrap
% Roberto Masocco <roberto.masocco@uniroma2.it>
% May 16, 2023

% ### C++ bootstrap ###
\section{C++ bootstrap}
\graphicspath{{figs/section2/}}

% --- Code examples ---
\begin{frame}{Code examples}
	Find all course materials on \textbg{GitHub} at \href{https://github.com/IntelligentSystemsLabUTV/ros2-examples}{\color{blue}\underline{ros2-examples}} (\texttt{humble} branch).
	\newline\newline
	The repository is organized as a \textbg{ROS 2 workspace} ready to be built, and intended to support \href{https://code.visualstudio.com/}{\color{blue}\underline{Visual Studio Code}} as \textbg{IDE}. Find all information in \href{https://github.com/IntelligentSystemsLabUTV/ros2-examples/blob/humble/README.md}{\color{blue}\underline{\texttt{README.md}}}.
	\newline\newline
	It is also organized with \textbg{Docker containers} in mind, and supports the automated build of development containers in VS Code.\\
	Such containers are based on our \href{https://github.com/IntelligentSystemsLabUTV/dua-template}{\color{blue}{\underline{\textbf{Distributed Unified Architecture}}}} project, which is part of Roberto Masocco's PhD thesis.\\
	Their inner workings are totally transparent, but if you're curious see \href{https://github.com/IntelligentSystemsLabUTV/ros2-examples/blob/humble/dua_template.md}{\color{blue}\underline{\texttt{dua\_template.md}}}.
	\begin{block}{}
		\centering
		Suggestion: clone it and set up your branch locally, to be still able to get and \texttt{merge} updates.
	\end{block}
\end{frame}

% --- C++ fundamentals ---
\begin{frame}{C++ fundamentals}{Back to basics}
	C++ has been developed from C, and is a \textbg{compiled}, \textbg{strongly-typed} (mostly) language.\\
	Its main features began as extensions of C to support modern \textbg{object-oriented programming} and \textbg{generic programming} paradigms, but it has evolved into much more.
	\newline\newline
	In order to get started with ROS 2, a minimal subset of its features is required.\\
	Dust off your C programming skills, then add:
	\begin{itemize}
		\item \href{https://www.geeksforgeeks.org/c-classes-and-objects/}{\color{blue}\underline{\textbf{Object-oriented programming}}}
		\item \href{https://www.geeksforgeeks.org/namespace-in-c/}{\color{blue}\underline{\textbf{Namespaces}}}
		\item \href{https://www.geeksforgeeks.org/templates-cpp/}{\color{blue}\underline{\textbf{Templates}}}
		\item \href{https://www.geeksforgeeks.org/smart-pointers-cpp/}{\color{blue}\underline{\textbf{Smart pointers}}}
	\end{itemize}
\end{frame}
\begin{frame}[fragile]{C++ fundamentals}{Object-oriented programming}
	\begin{columns}
		\column{.9\textwidth}
		% Listing: C++ OOP example
		\begin{lstlisting}[language=C++, caption=Example of definition of a C++ class.]
class MyClass : public ParentClass
{
public:
  MyClass();
  // ...
protected:
  // ...
private:
  // ...
};\end{lstlisting}
	\end{columns}
	Pay attention to \href{https://www.geeksforgeeks.org/inheritance-in-c/}{\color{blue}\underline{inheritance}} rules.
\end{frame}
\begin{frame}{C++ fundamentals}{Namespaces}
  \textbg{Subdivision} of the global namespace to avoid naming collisions between multiple libraries, resolved with the \textbg{\texttt{::} operator}.
  \newline\newline
  Names may become very long, so usually they are hidden with \texttt{typedef}.
\end{frame}
\begin{frame}[fragile]{C++ fundamentals}{Namespaces}
	\begin{columns}
		\column{.9\textwidth}
		% Listings: C++ namespaces usage example
		\begin{lstlisting}[language=C++, caption=Example of namespaces usage.]
namespace MyLib {
  void foo() { /* Does something */ }
} // This is typically done for libraries

class MyClass
{
public:
  void foo() { /* Does something as well */ }
} my_obj; // Watch out for the ';'!

MyLib::foo(); // This is calling foo from MyLib!
my_obj.foo(); // This is calling foo from MyClass!\end{lstlisting}
	\end{columns}
\end{frame}
\begin{frame}[fragile]{C++ fundamentals}{Templates}
	Classes or functions whose \textbg{implementation depends on some data type}.\\
  When instantiated or called with a specific type, \textbg{the corresponding code is generated by the compiler}.
  \vspace{.5cm}
	\begin{columns}
		\column{.9\textwidth}
		% Listings: C++ template objects example
		\begin{lstlisting}[language=C++, caption=Example of objects of the template class \texttt{std::vector}.]
std::vector<int> int_vector;
std::vector<double> double_vector;\end{lstlisting}
	\end{columns}
  \vspace{.5cm}
	These too make names very long, so are usually \texttt{typedef}'d.
\end{frame}
\begin{frame}[fragile]{C++ fundamentals}{Shared pointers}
	A kind of \textbg{smart pointer} (there are also \texttt{unique} and \texttt{weak}) that also holds an \textbg{usage counter}, incremented by every function or object that is handling the pointer.\\
  \textbg{When the \texttt{shared\_ptr} is destroyed, if the counter is zero the pointed object is also destroyed and its memory deallocated.}
  \vspace{.1cm}
	\begin{columns}
		\column{.9\textwidth}
		% Listings: C++ shared pointer example
		\begin{lstlisting}[language=C++, caption=Example of shared pointer creation.]
{
  // A new scope starts here
  std::shared_ptr<rclcpp::Node> node =
    std::make_shared<rclcpp::Node>("my_node");
}
// Here the node and its pointer have been destroyed!\end{lstlisting}
	\end{columns}
  \vspace{.1cm}
	Obviously \texttt{std::shared\_ptr} is a template class. ROS 2 heavily relies on them, and the \texttt{SharedPtr} alias is frequently defined.
\end{frame}
